<!DOCTYPE html>

<html>

<head>
        <meta charset="utf-8">
        <title>TFT Helper</title>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-69981801-2"></script>
        <script>
                window.dataLayer = window.dataLayer || [];
                function gtag() { dataLayer.push(arguments); }
                gtag('js', new Date());

                gtag('config', 'UA-69981801-2');
        </script>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
                (adsbygoogle = window.adsbygoogle || []).push({
                        google_ad_client: "ca-pub-6528299985588319",
                        enable_page_level_ads: true
                });
        </script>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="TeamFight Tactics Helper">
        <meta name="author" content="MaxWilson">
        <script src="js/jquery-3.4.1.min.js"></script>

        <link rel="stylesheet" href="css/tabulator_bootstrap.min.css">
        <script type="text/javascript" src="js/tabulator.min.js"></script>

        <link rel="apple-touch-icon" sizes="57x57" href="img/icons/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="img/icons/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="img/icons/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="img/icons/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="img/icons/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="img/icons/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="img/icons/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="img/icons/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="img/icons/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192" href="img/icons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="img/icons/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="img/icons/favicon-16x16.png">
        <link rel="manifest" href="manifest.json">
        <meta name="msapplication-TileColor" content="#00497a">
        <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
        <meta name="theme-color" content="#00497a">

        <link rel="stylesheet" href="css/style.css">
</head>

<body>
        <div class="container">
                <div class="header">
                        <img src="img/TFT.png">
                        <h1>TeamFight Tactics Helper</h1>
                </div>
                <div class="content">
                        <div class="items">
                                <h2>Item Combinations</h2>
                                <ul class="item-selection-list">
                                        <li id="bfsword" onclick="allItemsDisplay(this.id, this);">
                                                <img class="s-item" src="img/items/bfsword.png">
                                        </li>
                                        <li id="recurvebow" onclick="allItemsDisplay(this.id, this);">
                                                <img class="s-item" src="img/items/recurvebow.png">
                                        </li>
                                        <li id="needlesslylargerod" onclick="allItemsDisplay(this.id, this);">
                                                <img class="s-item" src="img/items/needlesslylargerod.png">
                                        </li>
                                        <li id="tearofthegoddess" onclick="allItemsDisplay(this.id, this);">
                                                <img class="s-item" src="img/items/tearofthegoddess.png">
                                        </li>
                                        <li id="chainvest" onclick="allItemsDisplay(this.id, this);">
                                                <img class="s-item" src="img/items/chainvest.png">
                                        </li>
                                        <li id="negatroncloak" onclick="allItemsDisplay(this.id, this);">
                                                <img class="s-item" src="img/items/negatroncloak.png">
                                        </li>
                                        <li id="giantsbelt" onclick="allItemsDisplay(this.id, this);">
                                                <img class="s-item" src="img/items/giantsbelt.png">
                                        </li>
                                        <li id="spatula" onclick="allItemsDisplay(this.id, this);">
                                                <img class="s-item" src="img/items/spatula.png">
                                        </li>
                                </ul>
                                <div class="item-list"></div>
                        </div>
                        <hr>
                        <div class="origins">
                                <h2>Origins</h2>
                                <ul class="origin-selection-list">
                                        <li id="demon" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/demon.png">
                                        </li>
                                        <li id="dragon" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/dragon.png">
                                        </li>
                                        <li id="exile" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/exile.png">
                                        </li>
                                        <li id="glacial" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/glacial.png">
                                        </li>
                                        <li id="robot" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/robot.png">
                                        </li>
                                        <li id="imperial" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/imperial.png">
                                        </li>
                                        <li id="noble" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/noble.png">
                                        </li>
                                        <li id="ninja" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/ninja.png">
                                        </li>
                                        <li id="pirate" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/pirate.png">
                                        </li>
                                        <li id="phantom" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/phantom.png">
                                        </li>
                                        <li id="wild" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/wild.png">
                                        </li>
                                        <li id="void" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/void.png">
                                        </li>
                                        <li id="yordle" onclick="championFilter('origin', this.id, this);">
                                                <img class="s-item" src="img/origins/yordle.png">
                                        </li>
                                </ul>

                        </div>
                        <hr>
                        <div class="classes">
                                <h2>Classes</h2>
                                <ul class="class-selection-list">
                                        <li id="assassin" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/assassin.png">
                                        </li>
                                        <li id="blademaster" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/blademaster.png">
                                        </li>
                                        <li id="brawler" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/brawler.png">
                                        </li>
                                        <li id="elementalist" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/elementalist.png">
                                        </li>
                                        <li id="guardian" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/guardian.png">
                                        </li>
                                        <li id="gunslinger" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/gunslinger.png">
                                        </li>
                                        <li id="knight" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/knight.png">
                                        </li>
                                        <li id="ranger" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/ranger.png">
                                        </li>
                                        <li id="shapeshifter" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/shapeshifter.png">
                                        </li>
                                        <li id="sorcerer" onclick="championFilter('class', this.id, this);">
                                                <img class="s-item" src="img/classes/sorcerer.png">
                                        </li>
                                </ul>
                        </div>
                        <hr>
                        <div class="champions">
                                <h2>Champions</h2>
                                <div class="champion-list"></div>
                                <hr>
                                <ul class="champions-selection-list">
                                        <li class="blademaster demon three-cost"><img class="s-item" src="img/champions/aatrox.png"></li>
                                        <li class="sorcerer wild two-cost"><img class="s-item" src="img/champions/ahri.png"></li>
                                        <li class="assassin ninja four-cost"><img class="s-item" src="img/champions/akali.png"></li>
                                        <li class="elementalist glacial five-cost"><img class="s-item" src="img/champions/anivia.png"></li>
                                        <li class="ranger glacial three-cost"><img class="s-item" src="img/champions/ashe.png"></li>
                                        <li class="sorcerer dragon four-cost"><img class="s-item" src="img/champions/aurelion-sol.png"></li>
                                        <li class="brawler robot two-cost"><img class="s-item" src="img/champions/blitzcrank.png"></li>
                                        <li class="elementalist demon four-cost"><img class="s-item" src="img/champions/brand.png"></li>
                                        <li class="guardian glacial two-cost"><img class="s-item" src="img/champions/braum.png"></li>
                                        <li class="brawler void four-cost"><img class="s-item" src="img/champions/chogath.png"></li>
                                        <li class="knight imperial one-cost"><img class="s-item" src="img/champions/darius.png"></li>
                                        <li class="blademaster imperial four-cost"><img class="s-item" src="img/champions/draven.png"></li>
                                        <li class="shapeshifter demon one-cost"><img class="s-item" src="img/champions/elise.png"></li>
                                        <li class="assassin demon three-cost"><img class="s-item" src="img/champions/evelynn.png"></li>
                                        <li class="blademaster noble one-cost"><img class="s-item" src="img/champions/fiora.png"></li>
                                        <li class="gunslinger blademaster pirate three-cost"><img class="s-item" src="img/champions/gangplank.png"></li>
                                        <li class="knight noble one-cost"><img class="s-item" src="img/champions/garen.png"></li>
                                        <li class="shapeshifter wild yordle four-cost"><img class="s-item" src="img/champions/gnar.png"></li>
                                        <li class="gunslinger pirate one-cost"><img class="s-item" src="img/champions/graves.png"></li>
                                        <li class="sorcerer phantom five-cost"><img class="s-item" src="img/champions/karthus.png"></li>
                                        <li class="sorcerer void one-cost"><img class="s-item" src="img/champions/kassadin.png"></li>
                                        <li class="assassin imperial three-cost"><img class="s-item" src="img/champions/katarina.png"></li>
                                        <li class="knight noble five-cost"><img class="s-item" src="img/champions/kayle.png"></li>
                                        <li class="elementalist ninja yordle three-cost"><img class="s-item" src="img/champions/kennen.png"></li>
                                        <li class="assassin void one-cost"><img class="s-item" src="img/champions/khazix.png"></li>
                                        <li class="ranger phantom four-cost"><img class="s-item" src="img/champions/kindred.png"></li>
                                        <li class="guardian noble four-cost"><img class="s-item" src="img/champions/leona.png"></li>
                                        <li class="elementalist glacial two-cost"><img class="s-item" src="img/champions/lissandra.png"></li>
                                        <li class="gunslinger noble two-cost"><img class="s-item" src="img/champions/lucian.png"></li>
                                        <li class="sorcerer yordle two-cost"><img class="s-item" src="img/champions/lulu.png"></li>
                                        <li class="gunslinger pirate five-cost"><img class="s-item" src="img/champions/miss-fortune.png"></li>
                                        <li class="knight phantom one-cost"><img class="s-item" src="img/champions/mordekaiser.png"></li>
                                        <li class="sorcerer demon three-cost"><img class="s-item" src="img/champions/morgana.png"></li>
                                        <li class="shapeshifter wild one-cost"><img class="s-item" src="img/champions/nidalee.png"></li>
                                        <li class="knight yordle three-cost"><img class="s-item" src="img/champions/poppy.png"></li>
                                        <li class="assassin pirate two-cost"><img class="s-item" src="img/champions/pyke.png"></li>
                                        <li class="brawler void two-cost"><img class="s-item" src="img/champions/reksai.png"></li>
                                        <li class="assassin wild three-cost"><img class="s-item" src="img/champions/rengar.png"></li>
                                        <li class="knight glacial four-cost"><img class="s-item" src="img/champions/sejuani.png"></li>
                                        <li class="blademaster ninja two-cost"><img class="s-item" src="img/champions/shen.png"></li>
                                        <li class="shapeshifter dragon three-cost"><img class="s-item" src="img/champions/shyvana.png"></li>
                                        <li class="shapeshifter noble demon five-cost"><img class="s-item" src="img/champions/swain.png"></li>
                                        <li class="gunslinger yordle one-cost"><img class="s-item" src="img/champions/tristana.png"></li>
                                        <li class="sorcerer pirate two-cost"><img class="s-item" src="img/champions/twisted-fate.png"></li>
                                        <li class="ranger demon two-cost"><img class="s-item" src="img/champions/varus.png"></li>
                                        <li class="ranger noble one-cost"><img class="s-item" src="img/champions/vayne.png"></li>
                                        <li class="sorcerer noble three-cost"><img class="s-item" src="img/champions/veigar.png"></li>
                                        <li class="brawler glacial three-cost"><img class="s-item" src="img/champions/volibear.png"></li>
                                        <li class="brawler wild one-cost"><img class="s-item" src="img/champions/warwick.png"></li>
                                        <li class="blademaster exile five-cost"><img class="s-item" src="img/champions/yasuo.png"></li>
                                        <li class="assassin ninja two-cost"><img class="s-item" src="img/champions/zed.png"></li>
                                </ul>
                        </div>
                        <div class="push"></div>
                </div>
                <footer class="footer">
                        <div class="patch"><p>Patch: 9.14</p></div>
                        <div class="me_link"><a href="http://www.maxwilson.co.uk/" target="_blank">Max Wilson</a></div>
                        <div class="right"></div>
                        
                </footer>
        </div>

        <script type="text/javascript">
                var curr_item = 'none';

                window.onload = $('table.item-combo-list tr').hide().filter('.thi').show();

                $('ul.champions-selection-list li img').click(function(e) 
                { 
                        alert("Champion pages not implemented yet, sorry!");
                });

                var custom = function(cell){
                        //Fix centering here
                        return "<div style='position: relative; width: 100%; height: 100%;'><div style='position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);'>" + cell.getValue() + "</div></div>";
                }
                var itemFormat = function(cell){
                        return "<img class='i-item' style='vertical-align: middle;' src='img/items/" + cell.getValue() + ".png'>";
                }
                var iconFormat = function(row, cell){
                        var info = row.getData().cost;
                        var input = "";
                        if (info == 1) {
                                input = "one-cost"
                        } else if (info == 2) {
                                input = "two-cost";
                        } else if (info == 3) {
                                input = "three-cost";
                        } else if (info == 4) {
                                input = "four-cost";
                        } else {
                                input = "five-cost";
                        }
                        return "<img class='i-item " + input + "' src='img/champions/" + row.getData().icon + ".png'>";
                };
                var classFormat = function(row){
                        if ((row.getData().class).indexOf(',') > -1) { 
                                var dual = (row.getData().class).split(',');
                                return "<div style='position: relative; width: 100%; height: 100%;'><div style='position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);'><img class='d-item' src='img/classes/" + dual[0] + ".png'><span style='padding-right: 7px;'></span><img class='d-item' src='img/classes/" + dual[1] + ".png'>";
                        }
                        return "<img class='i-item' src='img/classes/" + row.getData().class + ".png'>";
                };
                var originFormat = function(row){
                        if ((row.getData().origin).indexOf(',') > -1) { 
                                var dual = (row.getData().origin).split(',');
                                return "<div style='position: relative; width: 100%; height: 100%;'><div style='position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);'><img class='d-item' src='img/origins/" + dual[0] + ".png'><span style='padding-right: 7px;'></span><img class='d-item' src='img/origins/" + dual[1] + ".png'>";
                        }
                        return "<img class='i-item' src='img/origins/" + row.getData().origin + ".png'>";
                };
                var costFormat = function(cell){
                        return "<div style='position: relative; width: 100%; height: 100%;'><div style='position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);'><img class='cost-img' src='img/coins.png'> " + cell.getValue() + "</div></div>";
                }

                var ctable = new Tabulator(".champion-list", {
                        ajaxURL:"./data/champions.json",
 	                layout:"fitColumns",
                        placeholder:"Please Select an Origin/Class",
                        resizableColumns:false,
 	                columns:[
	 	                {title:"Icon", field:"icon", align:"center", widthGrow:3, formatter:iconFormat, headerSort:false},
	 	                {title:"Name", field:"name", align:"center", widthGrow:4, formatter:custom, sorter:"string"},
	 	                {title:"Class", field:"class", align:"center", widthGrow:3, sorter:"string", formatter:classFormat},
	 	                {title:"Origin", field:"origin", align:"center", widthGrow:3, sorter:"string", formatter:originFormat},
                                {title:"Cost", field:"cost", align:"center", widthGrow:2, sorter:"number", formatter:costFormat},
 	                ],
 	                /*rowClick:function(e, row){ //trigger an alert message when the row is clicked
 		                alert("Row " + row.getData().icon + " Clicked!");
 	                },*/
                });

                var itable = new Tabulator(".item-list", {
                        ajaxURL:"./data/items.json",
 	                layout:"fitColumns",
                        columnVertAlign:"bottom",
                        placeholder:"Please Select a Base Item",
                        resizableColumns:false,
 	                columns:[
                                {
                                        title:"Item Combination",
                                        columns:[
                                        {title:"Base", field:"base", sorter:"string", align:"center", widthGrow:2, formatter:itemFormat, headerSort:false},
	 	                        {title:"Combo", field:"combo", sorter:"string", align:"center", widthGrow:2, formatter:itemFormat, headerSort:false},
                                        ],
                                },
	 	                {title:"Result", field:"result", sorter:"string", align:"center", widthGrow:2, formatter:itemFormat, headerSort:false},
                                {title:"Description", field:"desc", sorter:"string", formatter:"textarea", widthGrow:4, headerSort:false},
 	                ],
 	                /*rowClick:function(e, row){ //trigger an alert message when the row is clicked
 		                alert("Row " + row.getData().base + row.getData().combo + " Clicked!");
 	                },*/
                });

                ctable.redraw();
                //ctable.setFilter("name", "=", "none");
                ctable.clearFilter();
                itable.redraw();
                itable.setFilter("base", "=", "none");

                function championFilter(oc, val, e) {
                        var i = $('img', e);
                        console.log(oc, val);

                        $(".class-selection-list>li>img.active").not(i).removeClass("active");
                        $(".origin-selection-list>li>img.active").not(i).removeClass("active");
                        
                        if (i.hasClass('active')) {
                                i.removeClass('active');
                                //ctable.setFilter("name", "=", "none");
                                ctable.clearFilter();
                        } else {
                                i.addClass('active');
                                ctable.setFilter(oc, "like", val);
                                //$('html,body').animate({ scrollTop: $(".champions").offset().top }, 'slow');
                        }
                }

                function allItemsDisplay(thsVal, e) {
                        var i = $('img', e);
                        console.log(thsVal);
                        $(".item-selection-list>li>img.active").not(i).removeClass("active");

                        if (i.hasClass('active')) {
                                i.removeClass('active');
                                itable.setFilter("base", "=", "none");
                        } else {
                                i.addClass('active');
                                curr_item = thsVal;
                                itable.setFilter([[{field:"base", type:"=", value:thsVal},{field:"combo", type:"=", value:thsVal},]]);
                                if ($(window).height() <= 800) {
                                        $('html,body').animate({ scrollTop: $(".items").offset().top }, 'slow');
                                }
                        }
                }

                $(window).on('resize', function(){
                        ctable.redraw();
                        itable.redraw();
                });
        </script>
        </body>
        
</html>